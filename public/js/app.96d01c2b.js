(function(e){function t(t){for(var c,r,a=t[0],l=t[1],u=t[2],f=0,b=[];f<a.length;f++)r=a[f],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&b.push(i[r][0]),i[r]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);s&&s(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,a=1;a<n.length;a++){var l=n[a];0!==i[l]&&(c=!1)}c&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var c={},i={app:0},o=[];function r(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15b9":function(e,t,n){"use strict";n("4105")},"2ffc":function(e,t,n){},"33cb":function(e,t,n){},3465:function(e,t,n){"use strict";n("d02b")},4105:function(e,t,n){},"4f81":function(e,t,n){"use strict";n("95a2")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),i=(n("a15b"),{class:"container content"}),o={class:"action"},r={class:"game"};function a(e,t,n,a,l,u){var s=Object(c["o"])("PageHeader"),f=Object(c["o"])("ChessBoard"),b=Object(c["o"])("StatusBox"),d=Object(c["o"])("StatisticsBox");return Object(c["k"])(),Object(c["e"])("div",null,[Object(c["h"])(s,{onStartGame:u.start,onJoinGame:u.join},null,8,["onStartGame","onJoinGame"]),Object(c["f"])("div",i,[Object(c["f"])("div",o,[Object(c["f"])("div",r,[Object(c["h"])(f,{pieces:l.game.pieces,legal:l.game.legal,turn:l.game.turn,onMakeMove:u.move},null,8,["pieces","legal","turn","onMakeMove"])]),Object(c["h"])(b,{game:l.game,id:l.id},null,8,["game","id"])]),Object(c["f"])("div",null,[Object(c["h"])(d,{game:l.game,id:l.id},null,8,["game","id"])])])])}var l={class:"board"};function u(e,t,n,i,o,r){var a=Object(c["o"])("BoardSquare"),u=Object(c["o"])("BoardPiece"),s=Object(c["o"])("BoardLabel");return Object(c["k"])(),Object(c["e"])("div",{class:Object(c["i"])(["frame",r.rotate])},[Object(c["f"])("div",l,[(Object(c["k"])(),Object(c["e"])(c["a"],null,Object(c["n"])(8,(function(e){return Object(c["f"])("div",{key:e,class:"row"},[(Object(c["k"])(),Object(c["e"])(c["a"],null,Object(c["n"])(8,(function(t){return Object(c["h"])(a,{key:t,row:e,column:t,highlights:r.highlights,onSquareSelected:r.squareSelected},null,8,["row","column","highlights","onSquareSelected"])})),64))])})),64)),(Object(c["k"])(!0),Object(c["e"])(c["a"],null,Object(c["n"])(n.pieces,(function(e){return Object(c["k"])(),Object(c["c"])(u,{key:e.id,piece:e,onPieceSelected:r.pieceSelected},null,8,["piece","onPieceSelected"])})),128))]),Object(c["h"])(s,{class:"label-top",orientation:"horizontal"}),Object(c["h"])(s,{class:"label-left",orientation:"vertical"}),Object(c["h"])(s,{class:"label-bottom",orientation:"horizontal"}),Object(c["h"])(s,{class:"label-right",orientation:"vertical"}),Object(c["f"])("button",{class:"btn-flip",onClick:t[0]||(t[0]=function(){return r.flipBoard&&r.flipBoard.apply(r,arguments)})},"F")],2)}var s=n("2909");n("caad"),n("2532"),n("4de4"),n("d81d"),n("99af");function f(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("div",{class:Object(c["i"])(["square",[r.color,r.highlight]]),onClick:t[0]||(t[0]=function(){return r.click&&r.click.apply(r,arguments)})},null,2)}n("a9e3");var b={props:{row:Number,column:Number,board:Array,highlights:Array},computed:{color:function(){return(this.row%2!==0?this.column%2!==0:this.column%2===0)?"light":"dark"},highlight:function(){return this.highlights.includes(this.id)?"highlight":""},id:function(){return"".concat(String.fromCharCode(96+this.column)).concat(9-this.row)}},methods:{click:function(){this.$emit("square-selected",this.id)}}},d=(n("f996"),n("6b0d")),h=n.n(d);const p=h()(b,[["render",f],["__scopeId","data-v-23f91f43"]]);var j=p;function m(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("div",{class:Object(c["i"])(["piece",[r.fen,r.row,r.column]]),onClick:t[0]||(t[0]=function(){return r.click&&r.click.apply(r,arguments)})},null,2)}n("fb6a");var O={props:{piece:Object},computed:{fen:function(){return"fen-".concat(this.piece.type,"-").concat(this.piece.color)},row:function(){return"row-".concat(this.piece.position.slice(-1))},column:function(){return"col-".concat(this.piece.position.slice(0,1))}},methods:{click:function(){this.$emit("piece-selected",this.piece)}}};n("3465");const v=h()(O,[["render",m],["__scopeId","data-v-c27aabd6"]]);var g=v,k={class:"label"};function y(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("div",{class:Object(c["i"])(["label-group",r.group])},[(Object(c["k"])(),Object(c["e"])(c["a"],null,Object(c["n"])(8,(function(e){return Object(c["f"])("div",{key:e,class:Object(c["i"])(r.label)},[Object(c["f"])("div",k,Object(c["p"])(r.char(e)),1)],2)})),64))],2)}var S={props:{orientation:String},computed:{group:function(){return"horizontal"===this.orientation?"label-group-horizontal":"label-group-vertical"},label:function(){return"horizontal"===this.orientation?"label-horizontal":"label-vertical"}},methods:{char:function(e){return"horizontal"===this.orientation?String.fromCharCode(96+e):9-e}}};n("a324");const w=h()(S,[["render",y]]);var P=w,T={components:{BoardSquare:j,BoardLabel:P,BoardPiece:g},props:{pieces:Array,legal:Array,turn:String},data:function(){return{source:"",moveStarted:!1,flip:!1}},methods:{squareSelected:function(e){this.legalTargets().includes(e)&&this.moveStarted?(this.move(e),this.moveStarted=!1):this.moveStarted=!1},pieceSelected:function(e){e.color===this.turn.color?(this.moveStarted=!0,this.source=e.position):e.color!==this.turn.color&&this.moveStarted&&(this.move(e.position),this.moveStarted=!1)},move:function(e){this.$emit("make-move",{from:this.source,to:e})},legalTargets:function(){var e=this,t=this.legal.filter((function(t){return t.from===e.source}));return t.map((function(e){return e.to}))},flipBoard:function(){this.flip=!this.flip}},computed:{highlights:function(){return this.moveStarted?[].concat(Object(s["a"])(this.legalTargets()),[this.source]):[]},rotate:function(){return"flip-".concat(this.flip)}}};n("ad38");const C=h()(T,[["render",u],["__scopeId","data-v-135368e4"]]);var M=C,_={class:"header"},x={class:"container"};function B(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("div",_,[Object(c["f"])("div",x,[Object(c["f"])("button",{onClick:t[0]||(t[0]=function(){return r.start&&r.start.apply(r,arguments)})},"Start"),Object(c["f"])("button",{onClick:t[1]||(t[1]=function(){return r.join&&r.join.apply(r,arguments)})},"Join"),Object(c["r"])(Object(c["f"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.input=e}),placeholder:"Game ID or FEN string"},null,512),[[c["q"],o.input]])])])}var V={data:function(){return{input:""}},methods:{start:function(){this.$emit("start-game",this.input),this.input=""},join:function(){this.$emit("join-game",this.input),this.input=""}}};n("4f81");const I=h()(V,[["render",B],["__scopeId","data-v-6dd124f7"]]);var q=I,z=function(e){return Object(c["m"])("data-v-c43045ac"),e=e(),Object(c["l"])(),e},N={class:"status"},D=z((function(){return Object(c["f"])("h5",null,"Game clock",-1)})),G=z((function(){return Object(c["f"])("h5",null,"Move duration",-1)})),A=z((function(){return Object(c["f"])("h5",null,"Current turn",-1)})),J=Object(c["g"])("White Player"),$={key:0},L={class:"copy-line"},E=Object(c["g"])("Black Player"),F={key:0},H={class:"copy-line"},U=z((function(){return Object(c["f"])("h5",null,"FEN",-1)})),W={class:"copy-line"};function K(e,t,n,i,o,r){var a=Object(c["o"])("status-clock");return Object(c["k"])(),Object(c["e"])("div",N,[Object(c["f"])("div",null,[D,Object(c["f"])("p",null,[Object(c["h"])(a,{referenceTime:n.game.timeStart,pulse:o.pulse},null,8,["referenceTime","pulse"])])]),Object(c["f"])("div",null,[G,Object(c["f"])("p",null,[Object(c["h"])(a,{referenceTime:n.game.timeLastMove,pulse:o.pulse},null,8,["referenceTime","pulse"])])]),Object(c["f"])("div",null,[A,Object(c["f"])("p",null,Object(c["p"])(r.turn),1)]),Object(c["f"])("div",null,[Object(c["f"])("h5",null,[J,n.id===r.white?(Object(c["k"])(),Object(c["e"])("span",$," (you)")):Object(c["d"])("",!0)]),Object(c["f"])("div",L,[Object(c["f"])("p",null,Object(c["p"])(r.white),1),Object(c["f"])("button",{onClick:t[0]||(t[0]=function(e){return r.copy(r.white)})},"Copy")])]),Object(c["f"])("div",null,[Object(c["f"])("h5",null,[E,n.id===r.black?(Object(c["k"])(),Object(c["e"])("span",F," (you)")):Object(c["d"])("",!0)]),Object(c["f"])("div",H,[Object(c["f"])("p",null,Object(c["p"])(r.black),1),Object(c["f"])("button",{onClick:t[1]||(t[1]=function(e){return r.copy(r.black)})},"Copy")])]),Object(c["f"])("div",null,[U,Object(c["f"])("div",W,[Object(c["f"])("p",null,Object(c["p"])(r.fen),1),Object(c["f"])("button",{onClick:t[2]||(t[2]=function(e){return r.copy(r.fen)})},"Copy")])])])}function Q(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("span",null,Object(c["p"])(r.checkSingleDigit(r.hours))+":"+Object(c["p"])(r.checkSingleDigit(r.minutes))+":"+Object(c["p"])(r.checkSingleDigit(r.seconds)),1)}var R={props:{referenceTime:Number,pulse:Boolean},data:function(){return{base:0}},computed:{hours:function(){return this.referenceTime?Math.floor((this.base-this.referenceTime)/1e3/3600):0},minutes:function(){return this.referenceTime?Math.floor((this.base-this.referenceTime)/1e3%3600/60):0},seconds:function(){return this.referenceTime?Math.floor((this.base-this.referenceTime)/1e3%3600%60):0}},methods:{checkSingleDigit:function(e){return("0"+e).slice(-2)}},watch:{referenceTime:function(e){e&&(this.base=Date.now())},pulse:function(){this.referenceTime&&(this.base=this.base+1e3)}}};const X=h()(R,[["render",Q]]);var Y=X,Z={components:{StatusClock:Y},props:{game:Object,id:String},data:function(){return{pulse:!0}},computed:{turn:function(){return this.game.turn?this.game.turn.id===this.game.whitePlayer.id?"white":"black":"-"},white:function(){return this.game.whitePlayer?this.game.whitePlayer.id:"-"},black:function(){return this.game.blackPlayer?this.game.blackPlayer.id:"-"},fen:function(){return this.game.fen?this.game.fen:"-"}},methods:{copy:function(e){navigator.clipboard.writeText(e)}},mounted:function(){var e=this;setInterval((function(){e.pulse=!e.pulse}),1e3)}};n("15b9");const ee=h()(Z,[["render",K],["__scopeId","data-v-c43045ac"]]);var te=ee,ne=function(e){return Object(c["m"])("data-v-4ca81e96"),e=e(),Object(c["l"])(),e},ce={class:"statistics"},ie=ne((function(){return Object(c["f"])("h5",null,"Last moves",-1)})),oe={key:0},re=ne((function(){return Object(c["f"])("h5",null,"Time split",-1)})),ae={class:"time-split"},le={class:"time-split"};function ue(e,t,n,i,o,r){var a=Object(c["o"])("statistics-move");return Object(c["k"])(),Object(c["e"])("div",ce,[Object(c["f"])("div",null,[ie,Object(c["f"])("ul",null,[(Object(c["k"])(!0),Object(c["e"])(c["a"],null,Object(c["n"])(n.game.history,(function(e,t){return Object(c["k"])(),Object(c["c"])(a,{key:t,index:t,move:e,class:"saved-move"},null,8,["index","move"])})),128))]),0===r.lastMoves.length?(Object(c["k"])(),Object(c["e"])("p",oe,"No moves saved")):Object(c["d"])("",!0)]),Object(c["f"])("div",null,[re,Object(c["f"])("div",ae,[Object(c["f"])("div",{style:Object(c["j"])({width:r.timeSplit.wPct+"%",backgroundColor:"white",height:"10px"})},null,4),Object(c["f"])("div",{style:Object(c["j"])({width:r.timeSplit.bPct+"%",backgroundColor:"black",height:"10px"})},null,4)]),Object(c["f"])("div",le,[Object(c["f"])("p",null,Object(c["p"])(r.formatTime(r.timeSplit.wVal)),1),Object(c["f"])("p",null,Object(c["p"])(r.formatTime(r.timeSplit.bVal)),1)])])])}n("159b");var se={class:"saved-move"},fe={class:"text-smaller"},be={key:0};function de(e,t,n,i,o,r){return Object(c["k"])(),Object(c["e"])("li",se,[Object(c["f"])("span",null,Object(c["p"])(n.index+1)+".",1),Object(c["f"])("div",{class:Object(c["i"])(r.piece)},null,2),Object(c["f"])("span",null,Object(c["p"])(n.move.san),1),Object(c["f"])("span",fe,"("+Object(c["p"])(r.formatTime(n.move.duration))+")",1),""!==n.move.event?(Object(c["k"])(),Object(c["e"])("span",be,Object(c["p"])(n.move.event)+"!",1)):Object(c["d"])("",!0)])}var he={props:{index:Number,move:Object},computed:{piece:function(){return"fen-".concat(this.move.piece,"-").concat(this.move.color," icon")}},methods:{formatTime:function(e){var t=Math.floor(e/1e3%3600/60),n=Math.floor(e/1e3%3600%60);return"".concat(("0"+t).slice(-2),":").concat(("0"+n).slice(-2))}}};n("8f0e");const pe=h()(he,[["render",de],["__scopeId","data-v-667b267d"]]);var je=pe,me={components:{StatisticsMove:je},props:{game:Object,id:String},computed:{lastMoves:function(){var e;return null!==(e=this.game.history)&&void 0!==e?e:[]},timeSplit:function(){var e,t,n={wVal:0,wPct:50,bVal:0,bPct:50};this.game.history&&(this.game.history.forEach((function(e){"w"===e.color&&(n.wVal+=e.duration),"b"===e.color&&(n.bVal+=e.duration)})),n.wPct=null!==(e=n.wVal/(n.wVal+n.bVal)*100)&&void 0!==e?e:50,n.bPct=null!==(t=n.bVal/(n.wVal+n.bVal)*100)&&void 0!==t?t:50);return n}},methods:{formatTime:function(e){var t=Math.floor(e/1e3/3600),n=Math.floor(e/1e3%3600/60),c=Math.floor(e/1e3%3600%60);return"".concat(("0"+t).slice(-2),":").concat(("0"+n).slice(-2),":").concat(("0"+c).slice(-2))}}};n("9f3c");const Oe=h()(me,[["render",ue],["__scopeId","data-v-4ca81e96"]]);var ve=Oe,ge=n("8e27"),ke={name:"App",components:{ChessBoard:M,PageHeader:q,StatusBox:te,StatisticsBox:ve},data:function(){return{game:{},socket:Object(ge["io"])(),id:""}},methods:{start:function(e){this.socket.emit("game:start",e)},join:function(e){this.socket.emit("game:join",e),this.id=e,sessionStorage.setItem("id",this.id)},move:function(e){this.socket.emit("game:move",{id:this.id,move:e})}},mounted:function(){var e=this;this.socket.on("game:started",(function(t){e.game=t,e.id=t.whitePlayer.id,sessionStorage.setItem("id",e.id)})),this.socket.on("game:joined",(function(t){e.game=t})),this.socket.on("game:update",(function(t){e.game=t}))}};n("72d3");const ye=h()(ke,[["render",a]]);var Se=ye;Object(c["b"])(Se).mount("#app")},"5e0b":function(e,t,n){},"6ddd":function(e,t,n){},"72d3":function(e,t,n){"use strict";n("6ddd")},"745b":function(e,t,n){},"79d4":function(e,t,n){},"8f0e":function(e,t,n){"use strict";n("745b")},"95a2":function(e,t,n){},"9f3c":function(e,t,n){"use strict";n("33cb")},a324:function(e,t,n){"use strict";n("5e0b")},ad38:function(e,t,n){"use strict";n("2ffc")},d02b:function(e,t,n){},f996:function(e,t,n){"use strict";n("79d4")}});
//# sourceMappingURL=app.96d01c2b.js.map